<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ytdl][1]
    -   [InstallMiniGet][2]
    -   [InstallMiniGet][3]
-   [getBasicInfo][4]
-   [getInfo][5]
-   [pipeline][6]
-   [assign][7]
-   [retryFunc][8]
-   [parseFormats][9]
-   [getM3U8][10]
-   [getM3U8][11]
-   [between][12]
-   [parseAbbreviatedNumber][13]
-   [cutAfterJSON][14]
-   [playError][15]
-   [exposedMiniget][16]
-   [deprecate][17]
-   [sortFormatsBy][18]
-   [sortFormats][19]
-   [chooseFormat][20]
-   [filterFormats][21]
-   [addFormatMeta][22]
-   [getFormatByQuality][23]
-   [formats][24]
-   [validQueryDomains][25]
-   [urlRegex][26]
-   [idRegex][27]
-   [validateURL][28]
-   [getTokens][29]
-   [decipher][30]
-   [extractActions][31]
-   [setDownloadURL][32]
-   [decipherFormats][33]
-   [swapHeadAndPosition][34]

## ytdl

**Parameters**

-   `link` **[string][35]** 
-   `options` **![Object][36]** 

Returns **ReadableStream** 

### InstallMiniGet

Chooses a format to download.

**Parameters**

-   `miniget`  
-   `minipromise`  
-   `stream` **[stream.Readable][37]** 
-   `info` **[Object][36]** 
-   `options` **[Object][36]** 

### InstallMiniGet

Can be used to download video after its `info` is gotten through
`ytdl.getInfo()`. In case the user might want to look at the
`info` object before deciding to download.

**Parameters**

-   `miniget`  
-   `minipromise`  
-   `info` **[Object][36]** 
-   `options` **![Object][36]** 

Returns **ReadableStream** 

## getBasicInfo

Gets info from a video without getting additional formats.

**Parameters**

-   `id` **[string][35]** 
-   `options` **[Object][36]** 

Returns **[Promise][38]&lt;[Object][36]>** 

## getInfo

Gets info from a video additional formats and deciphered URLs.

**Parameters**

-   `id` **[string][35]** 
-   `options` **[Object][36]** 

Returns **[Promise][38]&lt;[Object][36]>** 

## pipeline

Goes through each endpoint in the pipeline, retrying on failure if the error is recoverable.
If unable to succeed with one endpoint, moves onto the next one.

**Parameters**

-   `args` **[Array][39]&lt;[Object][36]>** 
-   `validate` **[Function][40]** 
-   `retryOptions` **[Object][36]** 
-   `endpoints` **[Array][39]&lt;[Function][40]>** 

Returns **\[[Object][36], [Object][36], [Object][36]]** 

## assign

Like Object.assign(), but ignores `null` and `undefined` from `source`.

**Parameters**

-   `target` **[Object][36]** 
-   `source` **[Object][36]** 

Returns **[Object][36]** 

## retryFunc

Given a function, calls it with `args` until it's successful,
or until it encounters an unrecoverable error.
Currently, any error from miniget is considered unrecoverable. Errors such as
too many redirects, invalid URL, status code 404, status code 502.

**Parameters**

-   `func` **[Function][40]** 
-   `args` **[Array][39]&lt;[Object][36]>** 
-   `options` **[Object][36]** 
    -   `options.maxRetries` **[number][41]** 
    -   `options.backoff` **[Object][36]** 
        -   `options.backoff.inc` **[number][41]** 

## parseFormats

**Parameters**

-   `player_response` **[Object][36]** 

Returns **[Array][39]&lt;[Object][36]>** 

## getM3U8

Gets additional DASH formats.

**Parameters**

-   `url` **[string][35]** 
-   `options` **[Object][36]** 

Returns **[Promise][38]&lt;[Array][39]&lt;[Object][36]>>** 

## getM3U8

Gets additional formats.

**Parameters**

-   `url` **[string][35]** 
-   `options` **[Object][36]** 

Returns **[Promise][38]&lt;[Array][39]&lt;[Object][36]>>** 

## between

Extract string inbetween another.

**Parameters**

-   `haystack` **[string][35]** 
-   `left` **[string][35]** 
-   `right` **[string][35]** 

Returns **[string][35]** 

## parseAbbreviatedNumber

Get a number from an abbreviated number string.

**Parameters**

-   `string` **[string][35]** 

Returns **[number][41]** 

## cutAfterJSON

Match begin and end braces of input JSON, return only json

**Parameters**

-   `mixedJson` **[string][35]** 

Returns **[string][35]** 

## playError

Checks if there is a playability error.

**Parameters**

-   `player_response` **[Object][36]** 
-   `statuses` **[Array][39]&lt;[string][35]>** 
-   `ErrorType` **[Error][42]**  (optional, default `Error`)

Returns **![Error][42]** 

## exposedMiniget

Does a miniget request and calls options.requestCallback if present

**Parameters**

-   `url` **[string][35]** the request url
-   `options` **[Object][36]** an object with optional requestOptions and requestCallback parameters (optional, default `{}`)
-   `requestOptionsOverwrite` **[Object][36]** overwrite of options.requestOptions

Returns **miniget.Stream** 

## deprecate

Temporary helper to help deprecating a few properties.

**Parameters**

-   `obj` **[Object][36]** 
-   `prop` **[string][35]** 
-   `value` **[Object][36]** 
-   `oldPath` **[string][35]** 
-   `newPath` **[string][35]** 

## sortFormatsBy

Sort formats by a list of functions.

**Parameters**

-   `a` **[Object][36]** 
-   `b` **[Object][36]** 
-   `sortBy` **[Array][39]&lt;[Function][40]>** 

Returns **[number][41]** 

## sortFormats

Sort formats from highest quality to lowest.

**Parameters**

-   `a` **[Object][36]** 
-   `b` **[Object][36]** 

Returns **[number][41]** 

## chooseFormat

Choose a format depending on the given options.

**Parameters**

-   `formats` **[Array][39]&lt;[Object][36]>** 
-   `options` **[Object][36]** 


-   Throws **[Error][42]** when no format matches the filter/format rules

Returns **[Object][36]** 

## filterFormats

**Parameters**

-   `formats` **[Array][39]&lt;[Object][36]>** 
-   `filter` **[Function][40]** 

Returns **[Array][39]&lt;[Object][36]>** 

## addFormatMeta

**Parameters**

-   `format` **[Object][36]** 

Returns **[Object][36]** 

## getFormatByQuality

Gets a format based on quality or array of quality's

**Parameters**

-   `quality` **([string][35] | \[[string][35]])** 
-   `formats` **\[[Object][36]]** 

Returns **[Object][36]** 

## formats

[http://en.wikipedia.org/wiki/YouTube#Quality_and_formats][43]

## validQueryDomains

Get video ID.

There are a few type of video URL formats.

-   [https://www.youtube.com/watch?v=VIDEO_ID][44]
-   [https://m.youtube.com/watch?v=VIDEO_ID][45]
-   [https://youtu.be/VIDEO_ID][46]
-   [https://www.youtube.com/v/VIDEO_ID][47]
-   [https://www.youtube.com/embed/VIDEO_ID][48]
-   [https://music.youtube.com/watch?v=VIDEO_ID][49]
-   [https://gaming.youtube.com/watch?v=VIDEO_ID][50]

**Parameters**

-   `link` **[string][35]** 


-   Throws **[Error][42]** If unable to find a id
-   Throws **[TypeError][51]** If videoid doesn't match specs

Returns **[string][35]** 

## urlRegex

Gets video ID either from a url or by checking if the given string
matches the video ID format.

**Parameters**

-   `str` **[string][35]** 


-   Throws **[Error][42]** If unable to find a id
-   Throws **[TypeError][51]** If videoid doesn't match specs

Returns **[string][35]** 

## idRegex

Returns true if given id satifies YouTube's id format.

**Parameters**

-   `id` **[string][35]** 

Returns **[boolean][52]** 

## validateURL

Checks wether the input string includes a valid id.

**Parameters**

-   `string` **[string][35]** 

Returns **[boolean][52]** 

## getTokens

Extract signature deciphering tokens from html5player file.

**Parameters**

-   `html5playerfile` **[string][35]** 
-   `options` **[Object][36]** 

Returns **[Promise][38]&lt;[Array][39]&lt;[string][35]>>** 

## decipher

Decipher a signature based on action tokens.

**Parameters**

-   `tokens` **[Array][39]&lt;[string][35]>** 
-   `sig` **[string][35]** 

Returns **[string][35]** 

## extractActions

Extracts the actions that should be taken to decipher a signature.

This searches for a function that performs string manipulations on
the signature. We already know what the 3 possible changes to a signature
are in order to decipher it. There is

-   Reversing the string.
-   Removing a number of characters from the beginning.
-   Swapping the first character with another position.

Note, `Array#slice()` used to be used instead of `Array#splice()`,
it's kept in case we encounter any older html5player files.

After retrieving the function that does this, we can see what actions
it takes on a signature.

**Parameters**

-   `body` **[string][35]** 

Returns **[Array][39]&lt;[string][35]>** 

## setDownloadURL

**Parameters**

-   `format` **[Object][36]** 
-   `sig` **[string][35]** 

## decipherFormats

Applies `sig.decipher()` to all format URL's.

**Parameters**

-   `formats` **[Array][39]&lt;[Object][36]>** 
-   `html5player` **[string][35]** 
-   `options` **[Object][36]** 

## swapHeadAndPosition

Swaps the first element of an array with one of given position.

**Parameters**

-   `arr` **[Array][39]&lt;[Object][36]>** 
-   `position` **[number][41]** 

Returns **[Array][39]&lt;[Object][36]>** 

[1]: #ytdl

[2]: #installminiget

[3]: #installminiget-1

[4]: #getbasicinfo

[5]: #getinfo

[6]: #pipeline

[7]: #assign

[8]: #retryfunc

[9]: #parseformats

[10]: #getm3u8

[11]: #getm3u8-1

[12]: #between

[13]: #parseabbreviatednumber

[14]: #cutafterjson

[15]: #playerror

[16]: #exposedminiget

[17]: #deprecate

[18]: #sortformatsby

[19]: #sortformats

[20]: #chooseformat

[21]: #filterformats

[22]: #addformatmeta

[23]: #getformatbyquality

[24]: #formats

[25]: #validquerydomains

[26]: #urlregex

[27]: #idregex

[28]: #validateurl

[29]: #gettokens

[30]: #decipher

[31]: #extractactions

[32]: #setdownloadurl

[33]: #decipherformats

[34]: #swapheadandposition

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[37]: https://nodejs.org/api/stream.html#stream_class_stream_readable

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[40]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[42]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[43]: http://en.wikipedia.org/wiki/YouTube#Quality_and_formats

[44]: https://www.youtube.com/watch?v=VIDEO_ID

[45]: https://m.youtube.com/watch?v=VIDEO_ID

[46]: https://youtu.be/VIDEO_ID

[47]: https://www.youtube.com/v/VIDEO_ID

[48]: https://www.youtube.com/embed/VIDEO_ID

[49]: https://music.youtube.com/watch?v=VIDEO_ID

[50]: https://gaming.youtube.com/watch?v=VIDEO_ID

[51]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypeError

[52]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
