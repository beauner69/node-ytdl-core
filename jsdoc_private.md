<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ytdl][1]
    -   [InstallMiniGet][2]
    -   [InstallMiniGet][3]
-   [getBasicInfo][4]
-   [getInfo][5]
-   [parseFormats][6]
-   [getM3U8][7]
-   [getM3U8][8]
-   [between][9]
-   [parseAbbreviatedNumber][10]
-   [cutAfterJSON][11]
-   [playError][12]
-   [sortFormatsBy][13]
-   [sortFormats][14]
-   [chooseFormat][15]
-   [filterFormats][16]
-   [addFormatMeta][17]
-   [getFormatByQuality][18]
-   [formats][19]
-   [validQueryDomains][20]
-   [getVideoID][21]
-   [validateURL][22]
-   [idRegex][23]
-   [getTokens][24]
-   [decipher][25]
-   [extractActions][26]
-   [setDownloadURL][27]
-   [decipherFormats][28]
-   [swapHeadAndPosition][29]

## ytdl

**Parameters**

-   `link` **[string][30]** 
-   `options` **![Object][31]** 

Returns **ReadableStream** 

### InstallMiniGet

Chooses a format to download.

**Parameters**

-   `miniget`  
-   `minipromise`  
-   `stream` **[stream.Readable][32]** 
-   `info` **[Object][31]** 
-   `options` **[Object][31]** 

### InstallMiniGet

Can be used to download video after its `info` is gotten through
`ytdl.getInfo()`. In case the user might want to look at the
`info` object before deciding to download.

**Parameters**

-   `miniget`  
-   `minipromise`  
-   `info` **[Object][31]** 
-   `options` **![Object][31]** 

Returns **ReadableStream** 

## getBasicInfo

Gets info from a video without getting additional formats.

**Parameters**

-   `id` **[string][30]** 
-   `options` **[Object][31]** 

Returns **[Promise][33]&lt;[Object][31]>** 

## getInfo

Gets info from a video additional formats and deciphered URLs.

**Parameters**

-   `id` **[string][30]** 
-   `options` **[Object][31]** 

Returns **[Promise][33]&lt;[Object][31]>** 

## parseFormats

**Parameters**

-   `player_response` **[Object][31]** 

Returns **[Array][34]&lt;[Object][31]>** 

## getM3U8

Gets additional DASH formats.

**Parameters**

-   `url` **[string][30]** 
-   `options` **[Object][31]** 

Returns **[Promise][33]&lt;[Array][34]&lt;[Object][31]>>** 

## getM3U8

Gets additional formats.

**Parameters**

-   `url` **[string][30]** 
-   `options` **[Object][31]** 

Returns **[Promise][33]&lt;[Array][34]&lt;[Object][31]>>** 

## between

Extract string inbetween another.

**Parameters**

-   `haystack` **[string][30]** 
-   `left` **[string][30]** 
-   `right` **[string][30]** 

Returns **[string][30]** 

## parseAbbreviatedNumber

Get a number from an abbreviated number string.

**Parameters**

-   `string` **[string][30]** 

Returns **[number][35]** 

## cutAfterJSON

Match begin and end braces of input JSON, return only json

**Parameters**

-   `mixedJson` **[string][30]** 

Returns **[string][30]** 

## playError

Checks if there is a playability error.

**Parameters**

-   `player_response` **[Object][31]** 
-   `statuses` **[Array][34]&lt;[string][30]>** 

Returns **![Error][36]** 

## sortFormatsBy

Sort formats by a list of functions.

**Parameters**

-   `a` **[Object][31]** 
-   `b` **[Object][31]** 
-   `sortBy` **[Array][34]&lt;[Function][37]>** 

Returns **[number][35]** 

## sortFormats

Sort formats from highest quality to lowest.

**Parameters**

-   `a` **[Object][31]** 
-   `b` **[Object][31]** 

Returns **[number][35]** 

## chooseFormat

Choose a format depending on the given options.

**Parameters**

-   `formats` **[Array][34]&lt;[Object][31]>** 
-   `options` **[Object][31]** 


-   Throws **[Error][36]** when no format matches the filter/format rules

Returns **[Object][31]** 

## filterFormats

**Parameters**

-   `formats` **[Array][34]&lt;[Object][31]>** 
-   `filter` **[Function][37]** 

Returns **[Array][34]&lt;[Object][31]>** 

## addFormatMeta

**Parameters**

-   `format` **[Object][31]** 

Returns **[Object][31]** 

## getFormatByQuality

Gets a format based on quality or array of quality's

**Parameters**

-   `quality` **([string][30] | \[[string][30]])** 
-   `formats` **\[[Object][31]]** 

Returns **[Object][31]** 

## formats

[http://en.wikipedia.org/wiki/YouTube#Quality_and_formats][38]

## validQueryDomains

Get video ID.

There are a few type of video URL formats.

-   [https://www.youtube.com/watch?v=VIDEO_ID][39]
-   [https://m.youtube.com/watch?v=VIDEO_ID][40]
-   [https://youtu.be/VIDEO_ID][41]
-   [https://www.youtube.com/v/VIDEO_ID][42]
-   [https://www.youtube.com/embed/VIDEO_ID][43]
-   [https://music.youtube.com/watch?v=VIDEO_ID][44]
-   [https://gaming.youtube.com/watch?v=VIDEO_ID][45]

**Parameters**

-   `link` **[string][30]** 


-   Throws **[Error][36]** If unable to find a id
-   Throws **[TypeError][46]** If videoid doesn't match specs

Returns **[string][30]** 

## getVideoID

Gets video ID either from a url or by checking if the given string
matches the video ID format.

**Parameters**

-   `str` **[string][30]** 


-   Throws **[Error][36]** If unable to find a id
-   Throws **[TypeError][46]** If videoid doesn't match specs

Returns **[string][30]** 

## validateURL

Checks wether the input string includes a valid id.

**Parameters**

-   `string` **[string][30]** 

Returns **[boolean][47]** 

## idRegex

Returns true if given id satifies YouTube's id format.

**Parameters**

-   `id` **[string][30]** 

Returns **[boolean][47]** 

## getTokens

Extract signature deciphering tokens from html5player file.

**Parameters**

-   `html5playerfile` **[string][30]** 
-   `options` **[Object][31]** 

Returns **[Promise][33]&lt;[Array][34]&lt;[string][30]>>** 

## decipher

Decipher a signature based on action tokens.

**Parameters**

-   `tokens` **[Array][34]&lt;[string][30]>** 
-   `sig` **[string][30]** 

Returns **[string][30]** 

## extractActions

Extracts the actions that should be taken to decipher a signature.

This searches for a function that performs string manipulations on
the signature. We already know what the 3 possible changes to a signature
are in order to decipher it. There is

-   Reversing the string.
-   Removing a number of characters from the beginning.
-   Swapping the first character with another position.

Note, `Array#slice()` used to be used instead of `Array#splice()`,
it's kept in case we encounter any older html5player files.

After retrieving the function that does this, we can see what actions
it takes on a signature.

**Parameters**

-   `body` **[string][30]** 

Returns **[Array][34]&lt;[string][30]>** 

## setDownloadURL

**Parameters**

-   `format` **[Object][31]** 
-   `sig` **[string][30]** 

## decipherFormats

Applies `sig.decipher()` to all format URL's.

**Parameters**

-   `formats` **[Array][34]&lt;[Object][31]>** 
-   `html5player` **[string][30]** 
-   `options` **[Object][31]** 

## swapHeadAndPosition

Swaps the first element of an array with one of given position.

**Parameters**

-   `arr` **[Array][34]&lt;[Object][31]>** 
-   `position` **[number][35]** 

Returns **[Array][34]&lt;[Object][31]>** 

[1]: #ytdl

[2]: #installminiget

[3]: #installminiget-1

[4]: #getbasicinfo

[5]: #getinfo

[6]: #parseformats

[7]: #getm3u8

[8]: #getm3u8-1

[9]: #between

[10]: #parseabbreviatednumber

[11]: #cutafterjson

[12]: #playerror

[13]: #sortformatsby

[14]: #sortformats

[15]: #chooseformat

[16]: #filterformats

[17]: #addformatmeta

[18]: #getformatbyquality

[19]: #formats

[20]: #validquerydomains

[21]: #getvideoid

[22]: #validateurl

[23]: #idregex

[24]: #gettokens

[25]: #decipher

[26]: #extractactions

[27]: #setdownloadurl

[28]: #decipherformats

[29]: #swapheadandposition

[30]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[31]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[32]: https://nodejs.org/api/stream.html#stream_class_stream_readable

[33]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[34]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[38]: http://en.wikipedia.org/wiki/YouTube#Quality_and_formats

[39]: https://www.youtube.com/watch?v=VIDEO_ID

[40]: https://m.youtube.com/watch?v=VIDEO_ID

[41]: https://youtu.be/VIDEO_ID

[42]: https://www.youtube.com/v/VIDEO_ID

[43]: https://www.youtube.com/embed/VIDEO_ID

[44]: https://music.youtube.com/watch?v=VIDEO_ID

[45]: https://gaming.youtube.com/watch?v=VIDEO_ID

[46]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypeError

[47]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
