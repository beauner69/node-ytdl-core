<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ytdl][1]
    -   [downloadFromInfo][2]
-   [downloadFromInfoCallback][3]
-   [getBasicInfo][4]
-   [getFullInfo][5]
-   [gotConfig][6]
-   [decipherURL][7]
-   [mergeFormats][8]
-   [getDashManifest][9]
-   [getM3U8][10]
-   [fn][11]
-   [getVideoDescription][12]
-   [getVideoMedia][13]
-   [getPublished][14]
-   [getRelatedVideos][15]
-   [userRegexp][16]
-   [sortFormats][17]
-   [chooseFormat][18]
-   [filterFormats][19]
-   [between][20]
-   [getVideoID][21]
-   [validateURL][22]
-   [parseFormats][23]
-   [addFormatMeta][24]
-   [stripHTML][25]
-   [parallel][26]
-   [indexOf][27]
-   [validQueryDomains][28]
-   [idRegex][29]
-   [formats][30]
-   [getTokens][31]
-   [decipher][32]
-   [extractActions][33]
-   [setDownloadURL][34]
-   [decipherFormats][35]
-   [swapHeadAndPosition][36]

## ytdl

**Parameters**

-   `link` **[string][37]** 
-   `options` **![Object][38]** 

Returns **ReadableStream** 

### downloadFromInfo

Can be used to download video after its `info` is gotten through
`ytdl.getInfo()`. In case the user might want to look at the
`info` object before deciding to download.

**Parameters**

-   `info` **[Object][38]** 
-   `options` **![Object][38]** 

## downloadFromInfoCallback

Chooses a format to download.

**Parameters**

-   `stream` **[stream.Readable][39]** 
-   `info` **[Object][38]** 
-   `options` **[Object][38]** 

## getBasicInfo

Gets info from a video without getting additional formats.

**Parameters**

-   `id` **[string][37]** 
-   `options` **[Object][38]** 
-   `callback`  

## getFullInfo

Gets info from a video additional formats and deciphered URLs.

**Parameters**

-   `id` **[string][37]** 
-   `options` **[Object][38]** 
-   `callback`  

## gotConfig

**Parameters**

-   `id` **[Object][38]** 
-   `options` **[Object][38]** 
-   `additional` **[Object][38]** 
-   `config` **[Object][38]** 
-   `fromEmbed` **[boolean][40]** 
-   `callback`  

## decipherURL

**Parameters**

-   `url` **[string][37]** 
-   `tokens` **[Array][41]&lt;[string][37]>** 

## mergeFormats

Merges formats from DASH or M3U8 with formats from video info page.

**Parameters**

-   `info` **[Object][38]** 
-   `formatsMap` **[Object][38]** 

## getDashManifest

Gets additional DASH formats.

**Parameters**

-   `url` **[string][37]** 
-   `options` **[Object][38]** 
-   `callback`  

## getM3U8

Gets additional formats.

**Parameters**

-   `url` **[string][37]** 
-   `options` **[Object][38]** 
-   `callback`  

## fn

**Parameters**

-   `link` **[string][37]** 
-   `options` **[Object][38]** 

## getVideoDescription

Get video description from html

**Parameters**

-   `html` **[string][37]** 

Returns **[string][37]** 

## getVideoMedia

Get video media (extra information) from html

**Parameters**

-   `body` **[string][37]** 

Returns **[Object][38]** 

## getPublished

Get video published at from html.

**Parameters**

-   `body` **[string][37]** 

Returns **[string][37]** 

## getRelatedVideos

Get video published at from html.
Credits to [https://github.com/paixaop][42].

**Parameters**

-   `body` **[string][37]** 

Returns **[Array][41]&lt;[Object][38]>** 

## userRegexp

Get video Owner from html.

**Parameters**

-   `body` **[string][37]** 

Returns **[Object][38]** 

## sortFormats

Sort formats from highest quality to lowest.
By resolution, then video bitrate, then audio bitrate.

**Parameters**

-   `a` **[Object][38]** 
-   `b` **[Object][38]** 

## chooseFormat

Choose a format depending on the given options.

**Parameters**

-   `formats` **[Array][41]&lt;[Object][38]>** 
-   `options` **[Object][38]** 

Returns **([Object][38] \| [Error][43])** 

## filterFormats

**Parameters**

-   `formats` **[Array][41]&lt;[Object][38]>** 
-   `filter` **[Function][44]** 

Returns **[Array][41]&lt;[Object][38]>** 

## between

Extract string inbetween another.

**Parameters**

-   `haystack` **[string][37]** 
-   `left` **[string][37]** 
-   `right` **[string][37]** 

Returns **[string][37]** 

## getVideoID

Gets video ID either from a url or by checking if the given string
matches the video ID format.

**Parameters**

-   `str` **[string][37]** 

Returns **([string][37] \| [Error][43])** 

## validateURL

Checks wether the input string includes a valid id.

**Parameters**

-   `string` **[string][37]** 

Returns **[boolean][40]** 

## parseFormats

**Parameters**

-   `info` **[Object][38]** 

Returns **[Array][41]&lt;[Object][38]>** 

## addFormatMeta

**Parameters**

-   `format` **[Object][38]** 

## stripHTML

Get only the string from an HTML string.

**Parameters**

-   `html` **[string][37]** 

Returns **[string][37]** 

## parallel

**Parameters**

-   `funcs` **[Array][41]&lt;[Function][44]>** 
-   `callback`  

## indexOf

String#indexOf() that supports regex too.

**Parameters**

-   `haystack` **[string][37]** 
-   `needle` **([string][37] \| [RegExp][45])** 

Returns **[number][46]** 

## validQueryDomains

Get video ID.

There are a few type of video URL formats.

-   [https://www.youtube.com/watch?v=VIDEO_ID][47]
-   [https://m.youtube.com/watch?v=VIDEO_ID][48]
-   [https://youtu.be/VIDEO_ID][49]
-   [https://www.youtube.com/v/VIDEO_ID][50]
-   [https://www.youtube.com/embed/VIDEO_ID][51]
-   [https://music.youtube.com/watch?v=VIDEO_ID][52]
-   [https://gaming.youtube.com/watch?v=VIDEO_ID][53]

**Parameters**

-   `link` **[string][37]** 

Returns **([string][37] \| [Error][43])** 

## idRegex

Returns true if given id satifies YouTube's id format.

**Parameters**

-   `id` **[string][37]** 

Returns **[boolean][40]** 

## formats

[http://en.wikipedia.org/wiki/YouTube#Quality_and_formats][54]

## getTokens

Extract signature deciphering tokens from html5player file.

**Parameters**

-   `html5playerfile` **[string][37]** 
-   `options` **[Object][38]** 
-   `callback`  

## decipher

Decipher a signature based on action tokens.

**Parameters**

-   `tokens` **[Array][41]&lt;[string][37]>** 
-   `sig` **[string][37]** 

Returns **[string][37]** 

## extractActions

Extracts the actions that should be taken to decipher a signature.

This searches for a function that performs string manipulations on
the signature. We already know what the 3 possible changes to a signature
are in order to decipher it. There is

-   Reversing the string.
-   Removing a number of characters from the beginning.
-   Swapping the first character with another position.

Note, `Array#slice()` used to be used instead of `Array#splice()`,
it's kept in case we encounter any older html5player files.

After retrieving the function that does this, we can see what actions
it takes on a signature.

**Parameters**

-   `body` **[string][37]** 

Returns **[Array][41]&lt;[string][37]>** 

## setDownloadURL

**Parameters**

-   `format` **[Object][38]** 
-   `sig` **[string][37]** 
-   `debug` **[boolean][40]** 

## decipherFormats

Applies `sig.decipher()` to all format URL's.

**Parameters**

-   `formats` **[Array][41]&lt;[Object][38]>** 
-   `tokens` **[Array][41]&lt;[string][37]>** 
-   `debug` **[boolean][40]** 

## swapHeadAndPosition

Swaps the first element of an array with one of given position.

**Parameters**

-   `arr` **[Array][41]&lt;[Object][38]>** 
-   `position` **[number][46]** 

Returns **[Array][41]&lt;[Object][38]>** 

[1]: #ytdl

[2]: #downloadfrominfo

[3]: #downloadfrominfocallback

[4]: #getbasicinfo

[5]: #getfullinfo

[6]: #gotconfig

[7]: #decipherurl

[8]: #mergeformats

[9]: #getdashmanifest

[10]: #getm3u8

[11]: #fn

[12]: #getvideodescription

[13]: #getvideomedia

[14]: #getpublished

[15]: #getrelatedvideos

[16]: #userregexp

[17]: #sortformats

[18]: #chooseformat

[19]: #filterformats

[20]: #between

[21]: #getvideoid

[22]: #validateurl

[23]: #parseformats

[24]: #addformatmeta

[25]: #striphtml

[26]: #parallel

[27]: #indexof

[28]: #validquerydomains

[29]: #idregex

[30]: #formats

[31]: #gettokens

[32]: #decipher

[33]: #extractactions

[34]: #setdownloadurl

[35]: #decipherformats

[36]: #swapheadandposition

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[39]: https://nodejs.org/api/stream.html#stream_class_stream_readable

[40]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[42]: https://github.com/paixaop

[43]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[44]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[45]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RegExp

[46]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[47]: https://www.youtube.com/watch?v=VIDEO_ID

[48]: https://m.youtube.com/watch?v=VIDEO_ID

[49]: https://youtu.be/VIDEO_ID

[50]: https://www.youtube.com/v/VIDEO_ID

[51]: https://www.youtube.com/embed/VIDEO_ID

[52]: https://music.youtube.com/watch?v=VIDEO_ID

[53]: https://gaming.youtube.com/watch?v=VIDEO_ID

[54]: http://en.wikipedia.org/wiki/YouTube#Quality_and_formats
